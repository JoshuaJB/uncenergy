<link rel="import" href="/components/paper-shadow/paper-shadow.html">

<polymer-element name="history-card">
  <template>
    <script type="text/javascript">
    google.setOnLoadCallback(drawHistory);
    function drawHistory() {
      if (!result || !result['data'][energyType][historyType])
        return;
      var data = google.visualization.arrayToDataTable([
        ["Day", result['data'][energyType]['live']['nativeUnit']],
        ['1', Number(result['data'][energyType][historyType]['previous'][0]['amount'])],
        ['2', Number(result['data'][energyType][historyType]['previous'][1]['amount'])],
        ['3', Number(result['data'][energyType][historyType]['previous'][2]['amount'])],
        ['4', Number(result['data'][energyType][historyType]['previous'][3]['amount'])],
        ['5', Number(result['data'][energyType][historyType]['previous'][4]['amount'])],
        ['6', Number(result['data'][energyType][historyType]['previous'][5]['amount'])],
        ['7', Number(result['data'][energyType][historyType]['previous'][6]['amount'])],
      ]);
      var options = {
        hAxis: {title: historyType[0, historyType.length - 2].capitalize(), titleTextStyle: {color: '#333'}},
        vAxis: {title: result['data'][energyType]['live']['nativeUnit'], minValue: 0},
        legend: 'none'
      };
      document.querySelector("history-card").shadowRoot.getElementById("title").innerHTML = "Historical " + energyType.capitalize)( + " Usage";
      var chart = new google.visualization.AreaChart(document.querySelector("history-card").shadowRoot.getElementById("history-chart"));
      chart.draw(data, options);
    }
    </script>
    <style>
    :host {
      display: block;
      position: relative;
      background-color: white;
      padding: 20px;
      width: 100%;
      font-size: 1.2rem;
      font-weight: 300;
      margin-top: 20px;
    }
    .card-header {
      margin-bottom: 10px;
    }
    #amount {
      font-size:60px;
      position:absolute;
      left: 0px;
      top: 27%;
      width: 100%;
      text-align:center;
    }
    #units {
      font-size:30px;
      position:absolute;
      left: 0px;
      top: 47%;
      width: 100%;
      text-align:center;
    }
    #history-chart {
      position:relative;
      width:400px;
      height:400px;
    }
    #building {
      font-size:20px;
      position:absolute;
      width:100px;
      left: 170px;
      margin-top: 260px;
      text-align:center;
      color:gray;
    }
    #title {
      margin-top: 20px;
      width: 100%;
      left: 0;
      color: black;
      font-size: 25px;
      text-align:center;
      position:absolute;
    }
    </style>
    <paper-shadow z="3"></paper-shadow>
    <div class="card-header" layout horizontal center>
      <div id="history-chart"></div>
      <p id="title"></p>
      <p id="building"></p>
    </div>
    
  </template>
  <script>
  Polymer({});
  </script>
</polymer-element>
